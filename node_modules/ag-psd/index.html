<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perf</title>
  <style>
    button {
      padding: 20px;
    }
  </style>
</head>

<body>
  <button onclick="readTest()">READ</button>
  <button onclick="writeTest()">WRITE</button>
  <script src="/dist/bundle.js"></script>
  <script>
    var buffer;
    var psd;
    var result;

    fetch('/resources/perf.bin')
      .then(x => x.arrayBuffer())
      .then(x => {
        buffer = x;
        psd = agPsd.readPsd(buffer);
        console.log('fetched');
      });

    function readTest() {
      const start = performance.now();
      psd = agPsd.readPsd(buffer);
      console.log('read:', (performance.now() - start).toFixed(2) + ' ms');
    }

    function writeTest() {
      const start = performance.now();
      result = agPsd.writePsd(psd, { generateThumbnail: true, trimImageData: true });
      console.log('write:', (performance.now() - start).toFixed(2) + ' ms');
    }
  </script>
</body>

</html>