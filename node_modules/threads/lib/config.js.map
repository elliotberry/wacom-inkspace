{"version":3,"sources":["config.js"],"names":["getConfig","setConfig","configuration","basepath","node","web","fallback","slaveScriptUrl","configDeepMerge","destObj","srcObj","ancestorProps","Object","keys","forEach","propKey","srcValue","ancestorPropsAndThis","concat","Error","join","config","get","set","newConfig"],"mappings":";;;;;;QA2CgBA,S,GAAAA,S;QAIAC,S,GAAAA,S;AA/ChB,IAAMC,gBAAgB;AACpBC,YAAW;AACTC,UAAO,EADE;AAETC,SAAO;AAFE,GADS;AAKpBC,YAAW;AACTC,oBAAiB;AADR;AALS,CAAtB;;AAUA,SAASC,eAAT,CAAyBC,OAAzB,EAAkCC,MAAlC,EAA8D;AAAA,MAApBC,aAAoB,uEAAJ,EAAI;;AAC5DC,SAAOC,IAAP,CAAYH,MAAZ,EAAoBI,OAApB,CAA4B,UAACC,OAAD,EAAa;AACvC,QAAMC,WAAWN,OAAQK,OAAR,CAAjB;AACA,QAAME,uBAAuBN,cAAcO,MAAd,CAAqB,CAAEH,OAAF,CAArB,CAA7B;;AAEA,QAAI,QAAOC,QAAP,yCAAOA,QAAP,OAAoB,QAAxB,EAAkC;AAChC,UAAI,OAAOP,QAASM,OAAT,CAAP,KAA8B,WAA9B,IAA6C,QAAON,QAASM,OAAT,CAAP,MAA8B,QAA/E,EAAyF;AACvF,cAAM,IAAII,KAAJ,CAAU,mDAAmDF,qBAAqBG,IAArB,CAA0B,GAA1B,CAA7D,CAAN;AACD;AACDZ,sBAAgBC,QAASM,OAAT,CAAhB,EAAoCC,QAApC,EAA8CC,oBAA9C;AACD,KALD,MAKO;AACL,UAAI,QAAOR,QAASM,OAAT,CAAP,MAA8B,QAAlC,EAA4C;AAC1C,cAAM,IAAII,KAAJ,CAAU,+CAA+CF,qBAAqBG,IAArB,CAA0B,GAA1B,CAAzD,CAAN;AACD;AACDX,cAASM,OAAT,IAAqBC,QAArB;AACD;AACF,GAfD;AAgBD;;AAED,IAAMK,SAAS;AACbC,OAAK;AAAA,WAAMpB,aAAN;AAAA,GADQ;;AAGbqB,OAAK,aAACC,SAAD,EAAe;AAClB,QAAI,QAAOA,SAAP,yCAAOA,SAAP,OAAqB,QAAzB,EAAmC;AACjC,YAAM,IAAIL,KAAJ,CAAU,yBAAV,CAAN;AACD;;AAEDX,oBAAgBN,aAAhB,EAA+BsB,SAA/B;AACD;AATY,CAAf;;kBAYeH,M;AAER,SAASrB,SAAT,GAAsB;AAC3B,SAAOqB,OAAOC,GAAP,EAAP;AACD;;AAEM,SAASrB,SAAT,GAA6B;AAClC,SAAOoB,OAAOE,GAAP,yBAAP;AACD","file":"config.js","sourcesContent":["const configuration = {\n  basepath : {\n    node : '',\n    web  : ''\n  },\n  fallback : {\n    slaveScriptUrl : ''\n  }\n};\n\nfunction configDeepMerge(destObj, srcObj, ancestorProps = []) {\n  Object.keys(srcObj).forEach((propKey) => {\n    const srcValue = srcObj[ propKey ];\n    const ancestorPropsAndThis = ancestorProps.concat([ propKey ]);\n\n    if (typeof srcValue === 'object') {\n      if (typeof destObj[ propKey ] !== 'undefined' && typeof destObj[ propKey ] !== 'object') {\n        throw new Error('Expected config property not to be an object: ' + ancestorPropsAndThis.join('.'));\n      }\n      configDeepMerge(destObj[ propKey ], srcValue, ancestorPropsAndThis);\n    } else {\n      if (typeof destObj[ propKey ] === 'object') {\n        throw new Error('Expected config property to be an object: ' + ancestorPropsAndThis.join('.'));\n      }\n      destObj[ propKey ] = srcValue;\n    }\n  });\n}\n\nconst config = {\n  get: () => configuration,\n\n  set: (newConfig) => {\n    if (typeof newConfig !== 'object') {\n      throw new Error('Expected config object.');\n    }\n\n    configDeepMerge(configuration, newConfig);\n  }\n};\n\nexport default config;\n\nexport function getConfig () {\n  return config.get();\n}\n\nexport function setConfig (...args) {\n  return config.set(...args);\n}\n"]}